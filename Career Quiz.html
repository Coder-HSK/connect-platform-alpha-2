<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Career Quiz | CONNEX</title>
  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* --- CSS Reset --- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* --- Base & Theme Background --- */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #0a192f;
      background-image:
        radial-gradient(circle at 15% 25%, rgba(42, 92, 199, 0.3) 0%, rgba(42, 92, 199, 0) 40%),
        radial-gradient(circle at 85% 75%, rgba(42, 92, 199, 0.3) 0%, rgba(42, 92, 199, 0) 40%),
        radial-gradient(rgba(255, 255, 255, 0.04) 1px, transparent 1px);
      background-size: 100% 100%, 100% 100%, 10px 10px;
      background-attachment: fixed;
      color: #ffffff;
      min-height: 100vh;
    }

    /* --- Navbar (Themed) --- */
    .navbar {
      background: rgba(10, 25, 47, 0.5);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      width: 100%;
    }

    .navbar .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .logo h1 {
      margin: 0;
    }

    .logo a {
      font-size: 1.5rem;
      font-weight: 700;
      color: #ffffff;
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      list-style: none;
      gap: 1.5rem;
    }

    .nav-links a {
      color: #e0e0e0;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-links a:hover {
      color: #ffffff;
    }

    .btn-primary {
      background-color: #007aff;
      color: #ffffff;
      text-decoration: none;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }

    .btn-primary:hover {
      background-color: #0056b3;
    }
    
    .sign-btn {
      width: 100%;
      padding: 0.8rem;
      font-size: 1rem;
      font-weight: 600;
      color: #ffffff;
      background-color: #007aff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 1rem;
    }
    .sign-btn:hover {
      background-color: #0056b3;
    }

    /* --- Main Container & Hero --- */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    
    main .container {
        display: flex;
        justify-content: center;
        align-items: center;
        padding-top: 3rem;
        padding-bottom: 3rem;
    }

    .dashboard-hero {
      text-align: center;
      padding: 2.5rem 0;
    }

    .dashboard-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 0.5rem;
    }

    /* --- Quiz Styles --- */
    .quiz-container {
      width: 100%;
      max-width: 700px;
      /* Glassmorphism */
      background: rgba(25, 41, 70, 0.35);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
      border-radius: 16px;
      padding: 2rem;
      overflow: hidden; /* For animations */
    }

    .quiz-question {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 2rem;
      color: #ffffff;
      line-height: 1.4;
    }

    .quiz-options {
      display: grid;
      gap: 1rem;
    }

    .option-btn {
      display: block;
      width: 100%;
      padding: 1rem;
      font-size: 1rem;
      font-weight: 500;
      color: #e0e0e0;
      text-align: left;
      /* Glassmorphism for buttons */
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .option-btn:hover {
      background: rgba(255, 255, 255, 0.25);
      color: #ffffff;
      transform: scale(1.02);
    }

    /* --- Results Styles --- */
    #results-box {
      display: none; /* Hidden by default */
    }

    .results-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: #ffffff;
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .results-subtitle {
        font-size: 1.1rem;
        font-weight: 400;
        color: #c5c5c5;
        text-align: center;
        margin-bottom: 2rem;
    }

    .results-careers {
      font-size: 1.25rem;
      font-weight: 600;
      color: #5ab9ff; /* Highlight color */
      margin-bottom: 1rem;
      text-align: center;
    }
    
    .results-description {
        font-size: 1rem;
        line-height: 1.6;
        color: #e0e0e0;
        margin-bottom: 1.5rem;
    }
    
    .results-details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        background: rgba(10, 25, 47, 0.3);
        padding: 1rem;
        border-radius: 12px;
    }
    
    .results-details strong {
        color: #ffffff;
        font-weight: 600;
    }
    
    .results-details span {
        color: #c5c5c5;
    }


    /* --- Footer (Themed) --- */
    .footer {
      margin-top: 3rem;
      padding: 2rem 0;
      background: rgba(10, 25, 47, 0.3);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      color: #c5c5c5;
    }
    .footer-content {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 2rem;
    }
    .footer-section h3, .footer-section h4 {
      color: #ffffff;
      margin-bottom: 1rem;
    }
    .footer-section p {
      max-width: 300px;
    }
    .footer-section ul {
      list-style: none;
    }
    .footer-section li {
      margin-bottom: 0.5rem;
    }
    .footer-section a {
      color: #c5c5c5;
      text-decoration: none;
    }
    .footer-section a:hover {
      color: #ffffff;
    }
    .footer-bottom {
      text-align: center;
      padding-top: 2rem;
      margin-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* --- Responsive (Mobile) --- */
    @media (max-width: 768px) {
      .navbar .container {
        flex-direction: column;
        gap: 1rem;
      }
      .nav-links {
        justify-content: center;
      }
      .footer-content {
        flex-direction: column;
        text-align: center;
      }
      .footer-section p {
        margin: 0 auto;
      }
      .results-details {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="container">
      <div class="logo">
        <h1><a href="Student-dashboard.html" class="logo">CONNEX</a></h1>
      </div>
      <ul class="nav-links">
        <li><a href="Student-dashboard.html">Home</a></li>
        <li><a href="#premium">Premium</a></li>
      </ul>
      <div class="cta-button">
        <a href="account.html" class="btn-primary">Account</a>
      </div>
    </div>
  </nav>

  <main>
    <div class="container">
      <div class="quiz-container">
        
        <!-- Quiz Box -->
        <div id="quiz-box">
          <h2 class="quiz-question" id="quiz-question-text">Loading...</h2>
          <div class="quiz-options" id="quiz-options-container">
            <!-- Options will be dynamically inserted here -->
          </div>
        </div>

        <!-- Results Box -->
        <div id="results-box">
          <h2 class="results-title">Your Career Profile</h2>
          <p class="results-subtitle">Based on your answers, here is a career path that matches your interests:</p>
          <h3 class="results-careers" id="results-careers-text">[Career Examples]</h3>
          <p class="results-description" id="results-description-text">[Brief Description]</p>
          <div class="results-details">
            <strong>Education:</strong>
            <span id="results-education-text">[Education]</span>
            <strong>Median Salary:</strong>
            <span id="results-salary-text">[Median Salary]</span>
            <strong>Work Environment:</strong>
            <span id="results-environment-text">[Work Environment]</span>
          </div>
          <button class="sign-btn" id="restart-quiz-btn">Take Quiz Again</button>
        </div>

      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>CONNEX</h3>
          <p>Building bridges between students and professionals.</p>
        </div>
        <div class="footer-section">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#how-it-works">How It Works</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Project by:</h4>
          <ul>
            <li>Hitendra Annavarapu</li>
            <li>Mahadi Ibrahim</li>
            <li>Quin Curry</li>
            <li>Charan Suguri</li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 CONNEX Platform - Alpha 2. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- JAVASCRIPT FOR QUIZ LOGIC -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {

      // --- 1. DEFINE QUIZ QUESTIONS (from career_finder_quiz_tree.md) ---
      const questions = {
        'Q1': {
          text: 'What type of work environment appeals to you most?',
          options: [
            { text: 'Hands-on work with tools, machines, or outdoor settings', next: 'Q2', choice: 'A' },
            { text: 'Research-oriented, analytical, or scientific work', next: 'Q3', choice: 'B' },
            { text: 'Creative, expressive, or artistic settings', next: 'Q4', choice: 'C' },
            { text: 'Helping people, teaching, or counseling', next: 'Q5', choice: 'D' },
            { text: 'Leading teams, selling, or business management', next: 'Q6', choice: 'E' },
            { text: 'Organized office work with data and procedures', next: 'Q7', choice: 'F' }
          ]
        },
        'Q2': {
          text: 'Which hands-on activity interests you?',
          options: [
            { text: 'Building, constructing, or repairing structures', next: 'Q8', choice: 'A' },
            { text: 'Vehicles, machinery, or mechanical systems', next: 'Q8', choice: 'B' },
            { text: 'Agriculture/animals/nature', next: 'Q8', choice: 'C' },
            { text: 'Electronics, equipment, or precision tools', next: 'Q8', choice: 'D' }
          ]
        },
        'Q3': {
          text: 'Which analytical field?',
          options: [
            { text: 'Life sciences/medical/biology', next: 'Q9', choice: 'A' },
            { text: 'Physical/chemistry/physics', next: 'Q9', choice: 'B' },
            { text: 'Computers/data/math', next: 'Q9', choice: 'C' },
            { text: 'Psychology/social research', next: 'Q9', choice: 'D' }
          ]
        },
        'Q4': {
          text: 'Creative domain?',
          options: [
            { text: 'Visual arts/design/photography', next: 'Q10', choice: 'A' },
            { text: 'Writing/journalism/content', next: 'Q10', choice: 'B' },
            { text: 'Performing arts/music/entertainment', next: 'Q10', choice: 'C' },
            { text: 'Fashion/interior/product design', next: 'Q10', choice: 'D' }
          ]
        },
        'Q5': {
          text: 'Preferred way to help?',
          options: [
            { text: 'Healthcare/nursing/medicine', next: 'Q11', choice: 'A' },
            { text: 'Teaching/education', next: 'Q11', choice: 'B' },
            { text: 'Counseling/therapy', next: 'Q11', choice: 'C' },
            { text: 'Community/social services', next: 'Q11', choice: 'D' }
          ]
        },
        'Q6': {
          text: 'Business angle?',
          options: [
            { text: 'Sales/persuasion/deals', next: 'Q12', choice: 'A' },
            { text: 'Managing/operations', next: 'Q12', choice: 'B' },
            { text: 'Entrepreneurship/startups', next: 'Q12', choice: 'C' },
            { text: 'Marketing/advertising', next: 'Q12', choice: 'D' }
          ]
        },
        'Q7': {
          text: 'Structured work?',
          options: [
            { text: 'Accounting/finance/audit', next: 'Q13', choice: 'A' },
            { text: 'Office management/admin', next: 'Q13', choice: 'B' },
            { text: 'Data/record keeping', next: 'Q13', choice: 'C' },
            { text: 'Legal/compliance', next: 'Q13', choice: 'D' }
          ]
        },
        'Q8': {
          text: 'How do you prefer to work?',
          options: [
            { text: 'Independently/minimal interaction', next: 'Q14', choice: 'A' },
            { text: 'In small teams/some collaboration', next: 'Q14', choice: 'B' },
            { text: 'Large teams/frequent interaction', next: 'Q14', choice: 'C' }
          ]
        },
        'Q9': {
          text: 'Problem-solving style:',
          options: [
            { text: 'Established methods', next: 'Q14', choice: 'A' },
            { text: 'Balance innovation/practical', next: 'Q14', choice: 'B' },
            { text: 'Novel/experimental approaches', next: 'Q14', choice: 'C' }
          ]
        },
        'Q10': {
          text: 'Creative process:',
          options: [
            { text: 'Client/market-driven', next: 'Q14', choice: 'A' },
            { text: 'Balance personal/commercial', next: 'Q14', choice: 'B' },
            { text: 'Pure expression/experimentation', next: 'Q14', choice: 'C' }
          ]
        },
        'Q11': {
          text: 'Handling difficult situations:',
          options: [
            { text: 'Direct confrontation', next: 'Q15', choice: 'A' },
            { text: 'Diplomacy/empathy', next: 'Q15', choice: 'B' },
            { text: 'Harmony/understanding', next: 'Q15', choice: 'C' }
          ]
        },
        'Q12': {
          text: 'Energizer in business:',
          options: [
            { text: 'Strategy/independent planning', next: 'Q15', choice: 'A' },
            { text: 'Collaboration/teams', next: 'Q15', choice: 'B' },
            { text: 'Networking/presenting', next: 'Q15', choice: 'C' }
          ]
        },
        'Q13': {
          text: 'Managing deadlines:',
          options: [
            { text: 'Adapt priorities/flexible', next: 'Q15', choice: 'A' },
            { text: 'Structured planning w/ adjustments', next: 'Q15', choice: 'B' },
            { text: 'Strict schedule/adherence', next: 'Q15', choice: 'C' }
          ]
        },
        'Q14': {
          text: 'Work schedule:',
          options: [
            { text: 'Predictable 9â€“5 routine', next: 'Q15', choice: 'A' },
            { text: 'Flexible hours/some structure', next: 'Q15', choice: 'B' },
            { text: 'Project-based/variable hours', next: 'Q15', choice: 'C' }
          ]
        },
        'Q15': {
          text: 'Stress tolerance in high-pressure settings:',
          options: [
            { text: 'Thrive under pressure', next: 'RESULT', choice: 'A' },
            { text: 'Manage pressure, prefer predictability', next: 'RESULT', choice: 'B' },
            { text: 'Prefer calm/minimal stress', next: 'RESULT', choice: 'C' }
          ]
        }
      };

      // --- 2. DEFINE QUIZ RESULTS (from Full Results Table) ---
      // This maps the named codes from the table to the result data.
      const resultsData = {
        'Realistic-Construction + Low-Extraversion + Structured + Low-Neuroticism': { careers: 'Carpenter, Electrician, Plumber, Construction Inspector', description: 'Technical trades, independent work', education: 'Certification, Apprenticeship', salary: '$50k-$70k', environment: 'Field, Structured' },
        'Realistic-Mechanical + Low-Extraversion + Structured + Low-Neuroticism': { careers: 'Automotive Technician, Aircraft Mechanic', description: 'Mechanical repair, technical expertise', education: 'Certification, Associate', salary: '$45k-$75k', environment: 'Workshop/Field' },
        'Realistic-Nature + Low-Extraversion + Flexible + Moderate-Neuroticism': { careers: 'Forest Ranger, Wildlife Biologist', description: 'Nature, animals, outdoors', education: 'Associate/Bachelor\'s', salary: '$40k-$65k', environment: 'Outdoors, Variable' },
        'Realistic-Technical + Moderate-Extraversion + Flexible + Low-Neuroticism': { careers: 'Engineering Tech, Surveyor', description: 'Team, technical collaboration', education: 'Technical Cert./Assoc.', salary: '$55k-$80k', environment: 'Lab/Field' },
        'Investigative-Life + High-Openness + Structured + Low-Neuroticism': { careers: 'Medical Researcher, Geneticist', description: 'Life sciences, research', education: 'MS/PhD', salary: '$80k-$120k', environment: 'Academic/Lab' },
        'Investigative-Physical + High-Openness + Flexible + Low-Neuroticism': { careers: 'Physicist, Chemist', description: 'Physical science, theory', education: 'PhD', salary: '$85k-$135k', environment: 'Lab/Univ.' },
        'Investigative-Data + High-Openness + Autonomous + Low-Neuroticism': { careers: 'Data Scientist, Actuary', description: 'Data, programming', education: 'BS/MS', salary: '$90k-$150k', environment: 'Tech/Remote' },
        'Investigative-Social + Moderate-Openness + Flexible + Moderate-Neuroticism': { careers: 'Psychologist, Sociologist', description: 'Human behavior, analysis', education: 'MS/PhD', salary: '$70k-$100k', environment: 'Univ./Corporate' },
        'Artistic-Visual + High-Openness + Autonomous + Moderate-Neuroticism': { careers: 'Fine Artist, Photographer', description: 'Creative expression', education: 'BA or Portfolio', salary: '$45k-$85k', environment: 'Studio/Freelance' },
        'Artistic-Writing + Moderate-Openness + Flexible + Moderate-Neuroticism': { careers: 'Writer, Journalist', description: 'Writing, content', education: 'BA', salary: '$50k-$80k', environment: 'Remote/Deadlines' },
        'Artistic-Performance + High-Openness + Autonomous + Low-Neuroticism': { careers: 'Actor, Musician', description: 'Live performance', education: 'Training/BA', salary: '$40k-$75k', environment: 'Theatre/Studio' },
        'Artistic-Design + Low-Openness + Structured + Moderate-Neuroticism': { careers: 'Graphic/UX Designer', description: 'Commercial design', education: 'BA', salary: '$55k-$90k', environment: 'Design Firm' },
        'Social-Healthcare + High-Agreeableness + Structured + Low-Neuroticism': { careers: 'Nurse, Therapist', description: 'Healthcare, patient care', education: 'Assoc./MS', salary: '$60k-$110k', environment: 'Clinic/Hospital' },
        'Social-Education + High-Agreeableness + Structured + Moderate-Neuroticism': { careers: 'Teacher, Professor', description: 'Teaching, education', education: 'BA/PhD', salary: '$50k-$85k', environment: 'School/Univ.' },
        'Social-Counseling + High-Agreeableness + Flexible + High-Neuroticism': { careers: 'Counselor, Social Worker', description: 'Therapy, advocacy', education: 'MS/Licensure', salary: '$45k-$75k', environment: 'School/Practice' },
        'Social-Community + Moderate-Agreeableness + Flexible + Moderate-Neuroticism': { careers: 'Community Organizer', description: 'Advocacy, nonprofit', education: 'BA/MS', salary: '$40k-$70k', environment: 'Nonprofit/Field' },
        'Enterprising-Sales + High-Extraversion + Autonomous + Low-Neuroticism': { careers: 'Sales Executive, Realtor', description: 'Sales, client mgt', education: 'BA', salary: '$55k-$120k+', environment: 'Field/Meetings' },
        'Enterprising-Management + Moderate-Extraversion + Structured + Low-Neuroticism': { careers: 'Project Manager, HR Manager', description: 'Team mgmt, ops', education: 'BA/MBA', salary: '$70k-$120k', environment: 'Office/Corp.' },
        'Enterprising-Entrepreneur + High-Extraversion + Autonomous + Low-Neuroticism': { careers: 'Startup Founder, Consultant', description: 'Business building', education: 'Bachelors/MBA (Varies)', salary: '$80k - $250k+', environment: 'Self-directed' },
        'Enterprising-Marketing + High-Extraversion + Flexible + Low-Neuroticism': { careers: 'Brand Strategist, PR Manager', description: 'Marketing, comms', education: 'BA', salary: '$65k-$110k', environment: 'Agency/In-house' },
        'Conventional-Finance + High-Conscientiousness + Structured + Low-Neuroticism': { careers: 'Accountant, Auditor', description: 'Accounting, finance', education: 'BA/CPA', salary: '$70k-$95k', environment: 'Office, Deadline' },
        'Conventional-Admin + Moderate-Conscientiousness + Structured + Moderate-Neuroticism': { careers: 'Office Manager, Admin Coordinator', description: 'Support, coordination', education: 'Assoc./BA', salary: '$40k-$65k', environment: 'Office' },
        'Conventional-Data + High-Conscientiousness + Structured + Moderate-Neuroticism': { careers: 'Database Admin, Records Manager', description: 'Data mgmt, records', education: 'Assoc./BA', salary: '$50k-$85k', environment: 'Office' },
        'Conventional-Legal + High-Conscientiousness + Structured + Low-Neuroticism': { careers: 'Paralegal, Compliance Officer', description: 'Legal, regulatory', education: 'Assoc./BA', salary: '$50k-$80k', environment: 'Law Firm/Corp.' }
      };

      // --- 3. QUIZ STATE & DOM ELEMENTS ---
      let currentPath = {}; // Stores answers, e.g., { Q1: 'A', Q2: 'B', ... }
      let currentQuestionId = 'Q1';

      const quizBox = document.getElementById('quiz-box');
      const resultsBox = document.getElementById('results-box');
      const questionTextEl = document.getElementById('quiz-question-text');
      const optionsContainerEl = document.getElementById('quiz-options-container');
      const restartQuizBtn = document.getElementById('restart-quiz-btn');

      // --- 4. QUIZ LOGIC FUNCTIONS ---

      /**
       * Loads and displays a new question.
       */
      function loadQuestion(questionId) {
        const question = questions[questionId];
        if (!question) {
          console.error(`Question ${questionId} not found!`);
          return;
        }

        questionTextEl.textContent = question.text;
        optionsContainerEl.innerHTML = ''; // Clear old options

        question.options.forEach(option => {
          const button = document.createElement('button');
          button.type = 'button';
          button.className = 'option-btn';
          button.textContent = option.text;
          button.onclick = () => handleAnswerClick(questionId, option.choice, option.next);
          optionsContainerEl.appendChild(button);
        });
      }

      /**
       * Handles an answer click, stores the path, and navigates.
       */
      function handleAnswerClick(questionId, choice, nextStep) {
        // Store the answer
        currentPath[questionId] = choice;

        if (nextStep === 'RESULT') {
          // End of the quiz, calculate and show results
          showResult();
        } else {
          // Go to the next question
          currentQuestionId = nextStep;
          loadQuestion(currentQuestionId);
        }
      }

      /**
       * Calculates the result based on the stored path and displays it.
       */
      function showResult() {
        // This is the complex part: mapping the path to the result code
        const resultCode = getResultCodeFromPath(currentPath);
        const result = resultsData[resultCode] || { // Fallback
          careers: 'Generalist / Explorer',
          description: 'You have a well-rounded set of interests! We recommend exploring our job board to see what sparks your curiosity.',
          education: 'Varies by Field',
          salary: 'Varies by Field',
          environment: 'Varies by Field'
        };

        // Populate results elements
        document.getElementById('results-careers-text').textContent = result.careers;
        document.getElementById('results-description-text').textContent = result.description;
        document.getElementById('results-education-text').textContent = result.education;
        document.getElementById('results-salary-text').textContent = result.salary;
        document.getElementById('results-environment-text').textContent = result.environment;
        
        // Hide quiz, show results
        quizBox.style.display = 'none';
        resultsBox.style.display = 'block';
      }
      
      /**
       * Resets the quiz to the beginning.
       */
      function restartQuiz() {
          currentPath = {};
          currentQuestionId = 'Q1';
          resultsBox.style.display = 'none';
          quizBox.style.display = 'block';
          loadQuestion(currentQuestionId);
      }
      
      // Add listener for restart button
      restartQuizBtn.addEventListener('click', restartQuiz);

      /**
       * This is the core logic that maps the user's path (e.g., {Q1: 'A', Q2: 'B', ...})
       * to the named key in the resultsData object (e.g., "Realistic-Mechanical...").
       * This logic is derived directly from your .md file.
       */
      function getResultCodeFromPath(path) {
        // --- Q15: Stress (Neuroticism) ---
        let p15_neuroticism = '';
        if (path['Q15'] === 'A') p15_neuroticism = 'Low-Neuroticism';
        else if (path['Q15'] === 'B') p15_neuroticism = 'Moderate-Neuroticism';
        else if (path['Q15'] === 'C') p15_neuroticism = 'High-Neuroticism'; // Mapping "Prefer calm" to High-N for "Social-Counseling"

        // --- Q14: Schedule (Structured) ---
        let p14_structure = '';
        if (path['Q14'] === 'A') p14_structure = 'Structured';
        else if (path['Q14'] === 'B') p14_structure = 'Flexible';
        else if (path['Q14'] === 'C') p14_structure = 'Autonomous'; // Mapping project-based to autonomous

        // --- PATH A: Realistic ---
        if (path['Q1'] === 'A') {
          let p2_domain = path['Q2'] === 'A' ? 'Construction' : path['Q2'] === 'B' ? 'Mechanical' : path['Q2'] === 'C' ? 'Nature' : 'Technical';
          let p8_extraversion = path['Q8'] === 'A' ? 'Low-Extraversion' : path['Q8'] === 'B' ? 'Moderate-Extraversion' : 'High-Extraversion';
          // Fix for "Realistic-Nature" (Q2:C) which uses Flexible+Moderate
          if (path['Q2'] === 'C') return 'Realistic-Nature + Low-Extraversion + Flexible + Moderate-Neuroticism';
          // Fix for "Realistic-Technical" (Q2:D)
          if (path['Q2'] === 'D') return 'Realistic-Technical + Moderate-Extraversion + Flexible + Low-Neuroticism';
          return `Realistic-${p2_domain} + ${p8_extraversion} + ${p14_structure} + ${p15_neuroticism}`;
        }
        
        // --- PATH B: Investigative ---
        if (path['Q1'] === 'B') {
          let p3_domain = path['Q3'] === 'A' ? 'Life' : path['Q3'] === 'B' ? 'Physical' : path['Q3'] === 'C' ? 'Data' : 'Social';
          let p9_openness = path['Q9'] === 'A' ? 'Low-Openness' : path['Q9'] === 'B' ? 'Moderate-Openness' : 'High-Openness';
          // Fix for "Investigative-Data" (Q3:C) which uses Autonomous
          if (path['Q3'] === 'C') return 'Investigative-Data + High-Openness + Autonomous + Low-Neuroticism';
          return `Investigative-${p3_domain} + ${p9_openness} + ${p14_structure} + ${p15_neuroticism}`;
        }
        
        // --- PATH C: Artistic ---
        if (path['Q1'] === 'C') {
          let p4_domain = path['Q4'] === 'A' ? 'Visual' : path['Q4'] === 'B' ? 'Writing' : path['Q4'] === 'C' ? 'Performance' : 'Design';
          let p10_openness = path['Q10'] === 'A' ? 'Low-Openness' : path['Q10'] === 'B' ? 'Moderate-Openness' : 'High-Openness';
          // Fix for "Artistic-Design" (Q4:D)
          if (path['Q4'] === 'D') return 'Artistic-Design + Low-Openness + Structured + Moderate-Neuroticism';
          return `Artistic-${p4_domain} + ${p10_openness} + ${p14_structure} + ${p15_neuroticism}`;
        }
        
        // --- PATH D: Social ---
        if (path['Q1'] === 'D') {
          let p5_domain = path['Q5'] === 'A' ? 'Healthcare' : path['Q5'] === 'B' ? 'Education' : path['Q5'] === 'C' ? 'Counseling' : 'Community';
          let p11_agree = path['Q11'] === 'A' ? 'Low-Agreeableness' : path['Q11'] === 'B' ? 'Moderate-Agreeableness' : 'High-Agreeableness';
          // Fix for "Social-Counseling" (Q5:C) which uses Flexible+High
          if (path['Q5'] === 'C' && p15_neuroticism === 'High-Neuroticism') return 'Social-Counseling + High-Agreeableness + Flexible + High-Neuroticism';
          return `Social-${p5_domain} + ${p11_agree} + Structured + ${p15_neuroticism}`; // Defaulting to Structured for Q11 paths
        }
        
        // --- PATH E: Enterprising ---
        if (path['Q1'] === 'E') {
          let p6_domain = path['Q6'] === 'A' ? 'Sales' : path['Q6'] === 'B' ? 'Management' : path['Q6'] === 'C' ? 'Entrepreneur' : 'Marketing';
          let p12_extra = path['Q12'] === 'A' ? 'Low-Extraversion' : path['Q12'] === 'B' ? 'Moderate-Extraversion' : 'High-Extraversion';
          // Fix for "Enterprising-Entrepreneur" (Q6:C)
          if (path['Q6'] === 'C') return 'Enterprising-Entrepreneur + High-Extraversion + Autonomous + Low-Neuroticism';
          // Fix for "Enterprising-Sales" (Q6:A)
          if (path['Q6'] === 'A') return 'Enterprising-Sales + High-Extraversion + Autonomous + Low-Neuroticism';
          // Fix for "Enterprising-Marketing" (Q6:D)
          if (path['Q6'] === 'D') return 'Enterprising-Marketing + High-Extraversion + Flexible + Low-Neuroticism';
          return `Enterprising-${p6_domain} + ${p12_extra} + Structured + ${p15_neuroticism}`; // Defaulting to Structured
        }
        
        // --- PATH F: Conventional ---
        if (path['Q1'] === 'F') {
          let p7_domain = path['Q7'] === 'A' ? 'Finance' : path['Q7'] === 'B' ? 'Admin' : path['Q7'] === 'C' ? 'Data' : 'Legal';
          let p13_consc = path['Q13'] === 'A' ? 'Low-Conscientiousness' : path['Q13'] === 'B' ? 'Moderate-Conscientiousness' : 'High-Conscientiousness';
          return `Conventional-${p7_domain} + ${p13_consc} + Structured + ${p15_neuroticism}`; // Defaulting to Structured
        }

        return null; // Fallback
      }

      // --- 5. START THE QUIZ ---
      loadQuestion(currentQuestionId);
    });
  </script>
</body>
</html>